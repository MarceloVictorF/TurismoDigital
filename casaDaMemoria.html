<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Casa da Memória - Turismo Digital Capixaba</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css">
</head>

<body>
  <!-- Inclui o cabeçalho -->
  <div id="header-placeholder"></div>

  <div class="container mt-5">
    <!-- Título Principal -->
    <h1 class="text-center mb-4">Casa da Memória</h1>

    <div class="image-container text-center">
      <img src="Pintura_Casa_da_Memoria,_Instituto_Histórico_e_Geográfico_de_Vila_Velha_(0111_1) (1).png" alt="Bússola com Relógio de Sol" width="600">
      <p class="caption">
        Por Instituto Histórico e Geográfico de Vila Velha - Casa da Memória - Instituto Histórico e Geográfico de Vila
        Velha -
        Casa da Memória/Midiateca Capixaba, <a href="https://creativecommons.org/licenses/by-sa/4.0"
          title="Creative Commons Attribution-Share Alike 4.0">CC BY-SA 4.0</a>,
        <a href="https://commons.wikimedia.org/w/index.php?curid=115161608">Hiperligação</a>
      </p>
    </div>

    <!-- Vídeo e Descrição da Casa da Memória -->
    <div class="row mb-5">
      <div class="col-12 col-md-10 offset-md-1">
        <div class="video-container text-center">
          <!-- Vídeo 360º -->
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/3ySIBVWKGmU"
              title="YouTube video player" frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
          </div>
        </div>
        <p class="text-justify">A <strong>Casa da Memória de Vila Velha</strong> tem como missão promover o estudo, a
          preservação e a valorização da história, geografia e cultura de Vila Velha e do Espírito Santo. A instituição se
          dedica a pesquisar, conservar e exibir uma vasta coleção de registros históricos, incluindo documentos, livros,
          fotografias, arte, arquitetura e relatos orais. Esses acervos são enriquecidos por doações de famílias locais e pela
          coleta de memórias e experiências que revelam a rica trajetória de nossa comunidade.</p>
        <p class="text-justify">Localizada no coração do Sítio Histórico da Prainha, em um imponente casarão no antigo Largo da
          Matriz, a Casa da Memória está cercada por marcos históricos que fazem de Vila Velha um verdadeiro tesouro cultural.
          Próxima a ícones como o Convento da Penha e a Igreja de Nossa Senhora do Rosário, a Casa se insere em um cenário que
          conta a história de uma cidade fundada em 1535, sendo a mais antiga do Espírito Santo.</p>
        <p class="text-justify">Visitar a Casa da Memória é uma oportunidade única de imersão no passado de Vila Velha, onde o
          presente se encontra com a preservação da nossa identidade cultural. A Casa da Memória é, assim, um ponto de conexão
          entre gerações, incentivando o resgate e a valorização do legado histórico que construiu e ainda molda nossa cidade e
          estado.</p>
        <!-- Linha do Tempo -->
        <h2 class="text-center mb-4">Linha do Tempo - Casa da Memória</h2>
        <div class="timeline">
          <div class="timeline-item">
            <div class="content">
              <div class="date">1893</div>
              <h3>Construção da Casa</h3>
              <p>A Casa da Memória foi construída no final do século XIX, inicialmente como uma residência.</p>
            </div>
          </div>
          <div class="timeline-item">
            <div class="content">
              <div class="date">1994</div>
              <h3>Inauguração como Museu</h3>
              <p>Após ser restaurada, a Casa foi inaugurada como o Museu Casa da Memória, com o objetivo de preservar e divulgar
                a história de Vila Velha e do Espírito Santo.</p>
            </div>
          </div>
          <div class="timeline-item">
            <div class="content">
              <div class="date">1997</div>
              <h3>Fundação da Casa da Memória</h3>
              <p>Em 1997, a Casa da Memória começou a realizar atividades de pesquisa e promoção da história e cultura de Vila
                Velha e do Espírito Santo.</p>
            </div>
          </div>
        </div>
        </div>
      
    </div>

    <!-- Galeria de Tour Virtual -->
    <h2 class="text-center mb-4">Tour Virtual</h2>
    <div class="row mb-5">
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria1" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 1</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria2" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 2</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria3" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 3</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria4" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 4</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria5" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 5</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria6" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 6</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria7" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 7</p>
      </div>
      <div class="col-12 col-sm-6 col-md-4">
        <div id="casaDaMemoria8" style="width: 100%; height: 500px;"></div>
        <p class="text-center">Sala 8</p>
      </div>    
    </div>

    <!-- Atividades na Igreja -->
    <h2 class="text-center mb-4">Atividades</h2>
    <div class="row mb-5 text-center activity-icon">
      <div class="col-6 col-md-2">
        <div class="activity-icon">
          <i class="fas fa-landmark fa-3x"></i>
          <p class="mt-2">Museu</p>
        </div>
      </div>
    </div>
  </div>

  <audio id="garrafa" src="garrafa.mp3"></audio>
  
  <audio id="cadeira" src="cadeira.ogg"></audio>
  
  <!-- Local onde o rodapé será inserido -->
  <div id="footer-placeholder"></div>
  
  
  <!-- Inclui os scripts -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
  
  <script>
    pannellum.viewer('casaDaMemoria1', {
      "type": "equirectangular",
      "panorama": "casaDaMemoria1.jpg",
      "autoLoad": true,
      "autoRotate": -2,
      "hotSpots": [
        {
          "pitch": 8,
          "yaw": -22,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": ""
          }
        },
        {
          "pitch": 8,
          "yaw": -6,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": ""
          }
        },
        {
          "pitch": 8,
          "yaw": 4,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "A televisão é usada para assistir programas, filmes e séries."
          }
        },
        {
          "pitch": 8,
          "yaw": 10,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "A televisão é usada para assistir programas, filmes e séries."
          }
        },
        {
          "pitch": -16,
          "yaw": -22,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "Bússula com relógio de sol: este dispositivo multifuncional não apenas apontava os pontos cardeais, mas também permitia calcular o horário com base na posição do sol. Usado por exploradores e navegadores, ele era essencial para desbravar novos territórios e atravessar oceanos em uma época sem GPS ou relógios digitais."
          }
        },
        {
          "pitch": -16,
          "yaw": -12,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": ""
          }
        },
        {
          "pitch": -16,
          "yaw": 4,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "A televisão é usada para assistir programas, filmes e séries."
          }
        },
        {
          "pitch": -36,
          "yaw": -22,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "A televisão é usada para assistir programas, filmes e séries."
          }
        }
      ]
    });
    pannellum.viewer('casaDaMemoria2', {
      "type": "equirectangular",
      "panorama": "casaDaMemoria2.jpg",
      "autoLoad": true,
      "autoRotate": -2,
      "hotSpots": [
        {
          "pitch": 0,
          "yaw": -20,
          "type": "custom",
          "createTooltipFunc": criarVisualizadorSTL, // Substituir aqui
          "createTooltipArgs": {
            "stlFilePath": "luisgama.stl" // Caminho do arquivo STL
          }
        },
        {
          "pitch": 0,  // Posição vertical
          "yaw": -40,   // Posição horizontal
          "type": "info",
          "text": "Garrafa",
          "clickHandlerFunc": function () {
            var audio = document.getElementById('tapete');
            audio.play();  // Reproduz o áudio
          }
        }
      ]
    });
    pannellum.viewer('casaDaMemoria3', {
      "type": "equirectangular",
      "panorama": "casaDaMemoria3.jpg",
      "autoLoad": true,
      "autoRotate": -2,
      "hotSpots": [
        {
          "pitch": 3,
          "yaw": 0,
          "type": "custom",
          "createTooltipFunc": criarPopup,
          "createTooltipArgs": {
            "content": "Abra ab ac."
          }
        },
        {
          "pitch": 0,  // Posição vertical
          "yaw": -20,   // Posição horizontal
          "type": "info",
          "text": "Garrafa",
          "clickHandlerFunc": function () {
            var audio = document.getElementById('tapete');
            audio.play();  // Reproduz o áudio
          }
        }
      ]
    });
    pannellum.viewer('casaDaMemoria4', {
        "type": "equirectangular",
        "panorama": "casaDaMemoria4.jpg",
        "autoLoad": true,
        "autoRotate": -2,
        "hotSpots": [
          {
            "pitch": 3,
            "yaw": 0,
            "type": "custom",
            "createTooltipFunc": criarPopup,
            "createTooltipArgs": {
              "content": "Abra ab ac."
            }
          },
          {
            "pitch": 0,  // Posição vertical
            "yaw": -20,   // Posição horizontal
            "type": "info",
            "text": "Garrafa",
            "clickHandlerFunc": function () {
              var audio = document.getElementById('tapete');
              audio.play();  // Reproduz o áudio
            }
          }
        ]
      });
    pannellum.viewer('casaDaMemoria5', {
        "type": "equirectangular",
        "panorama": "casaDaMemoria5.jpg",
        "autoLoad": true,
        "autoRotate": -2,
        "hotSpots": [
          {
            "pitch": 3,
            "yaw": 0,
            "type": "custom",
            "createTooltipFunc": criarPopup,
            "createTooltipArgs": {
              "content": "Abra ab ac."
            }
          },
          {
            "pitch": 0,  // Posição vertical
            "yaw": -20,   // Posição horizontal
            "type": "info",
            "text": "Garrafa",
            "clickHandlerFunc": function () {
              var audio = document.getElementById('tapete');
              audio.play();  // Reproduz o áudio
            }
          }
        ]
      });
    pannellum.viewer('casaDaMemoria6', {
        "type": "equirectangular",
        "panorama": "casaDaMemoria6.jpg",
        "autoLoad": true,
        "autoRotate": -2,
        "hotSpots": [
          {
            "pitch": 3,
            "yaw": 0,
            "type": "custom",
            "createTooltipFunc": criarPopup,
            "createTooltipArgs": {
              "content": "Abra ab ac."
            }
          },
          {
            "pitch": 0,  // Posição vertical
            "yaw": -20,   // Posição horizontal
            "type": "info",
            "text": "Garrafa",
            "clickHandlerFunc": function () {
              var audio = document.getElementById('tapete');
              audio.play();  // Reproduz o áudio
            }
          }
        ]
      });
    pannellum.viewer('casaDaMemoria7', {
        "type": "equirectangular",
        "panorama": "casaDaMemoria7.jpg",
        "autoLoad": true,
        "autoRotate": -2,
        "hotSpots": [
          {
            "pitch": 3,
            "yaw": 0,
            "type": "custom",
            "createTooltipFunc": criarPopup,
            "createTooltipArgs": {
              "content": "Abra ab ac."
            }
          },
          {
            "pitch": 0,  // Posição vertical
            "yaw": -20,   // Posição horizontal
            "type": "info",
            "text": "Garrafa",
            "clickHandlerFunc": function () {
              var audio = document.getElementById('tapete');
              audio.play();  // Reproduz o áudio
            }
          }
        ]
      });
    pannellum.viewer('casaDaMemoria8', {
        "type": "equirectangular",
        "panorama": "casaDaMemoria8.jpg",
        "autoLoad": true,
        "autoRotate": -2,
        "hotSpots": [
          {
            "pitch": 3,
            "yaw": 0,
            "type": "custom",
            "createTooltipFunc": criarPopup,
            "createTooltipArgs": {
              "content": "Abra ab ac."
            }
          },
          {
            "pitch": 0,  // Posição vertical
            "yaw": -20,   // Posição horizontal
            "type": "info",
            "text": "Garrafa",
            "clickHandlerFunc": function () {
              var audio = document.getElementById('tapete');
              audio.play();  // Reproduz o áudio
            }
          }
        ]
      });
    
    // function criarVisualizadorSTL(hotSpotDiv, args) {
    //   const link = document.createElement('a');
    //   link.textContent = "Ver modelo 3D aqui";
    //   link.href = "#";
    //   link.style.color = "white";
    //   link.style.textDecoration = "none";

    //   link.addEventListener('click', function (e) {
    //     e.preventDefault();

    //     // Criar um elemento <div> para o visualizador 3D
    //     const canvasDiv = document.createElement('div');
    //     canvasDiv.id = "stlViewer"; // ID único para o visualizador
    //     canvasDiv.style.position = "absolute";
    //     canvasDiv.style.top = "0";
    //     canvasDiv.style.left = "0";
    //     canvasDiv.style.width = "100%";
    //     canvasDiv.style.height = "100%";
    //     canvasDiv.style.zIndex = "1001";
    //     canvasDiv.style.backgroundColor = "rgba(0, 0, 0, 0.8)";

    //     // Adicionar o botão de fechar
    //     const closeButton = document.createElement('button');
    //     closeButton.textContent = "Fechar";
    //     closeButton.style.position = "absolute";
    //     closeButton.style.top = "10px";
    //     closeButton.style.right = "10px";
    //     closeButton.style.zIndex = "1002";
    //     closeButton.style.backgroundColor = "red";
    //     closeButton.style.color = "white";
    //     closeButton.style.border = "none";
    //     closeButton.style.padding = "10px";
    //     closeButton.style.cursor = "pointer";

    //     // Fechar o visualizador ao clicar no botão
    //     closeButton.addEventListener('click', () => {
    //       document.body.removeChild(canvasDiv);
    //     });

    //     canvasDiv.appendChild(closeButton);
    //     document.body.appendChild(canvasDiv);

    //     // Renderizar o modelo STL
    //     renderizarModeloSTL(canvasDiv, args.stlFilePath);
    //   });

    //   hotSpotDiv.appendChild(link);
    // }

    // function renderizarModeloSTL(container, stlPath) {
    //   const scene = new THREE.Scene();
    //   const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    //   const renderer = new THREE.WebGLRenderer({ antialias: true });
    //   renderer.setSize(window.innerWidth, window.innerHeight);

    //   // Anexar o renderizador ao container (o div sobreposto)
    //   container.appendChild(renderer.domElement);

    //   // Adicionar luzes
    //   const light = new THREE.DirectionalLight(0xffffff, 1);
    //   light.position.set(5, 5, 5).normalize();
    //   scene.add(light);

    //   const ambientLight = new THREE.AmbientLight(0x404040);
    //   scene.add(ambientLight);

    //   // Carregar o modelo STL
    //   const loader = new THREE.STLLoader();
    //   loader.load(stlPath, function (geometry) {
    //     const material = new THREE.MeshPhongMaterial({ color: 0x0055ff });
    //     const mesh = new THREE.Mesh(geometry, material);
    //     scene.add(mesh);

    //     // Ajustar posição da câmera
    //     const box = new THREE.Box3().setFromObject(mesh);
    //     const size = new THREE.Vector3();
    //     box.getSize(size);
    //     const center = new THREE.Vector3();
    //     box.getCenter(center);

    //     mesh.geometry.center();
    //     camera.position.set(center.x, center.y, size.z * 2);
    //     camera.lookAt(center);

    //     animate();
    //   });

    //   // Função de animação
    //   function animate() {
    //     requestAnimationFrame(animate);
    //     renderer.render(scene, camera);
    //   }

    //   animate();
    // }


    function criarVisualizadorSTL(hotSpotDiv, args) {
      // Adicionar um botão ou link ao hotspot para visualização STL
      const link = document.createElement('a');
      link.textContent = "Luiz Gama";
      link.href = "#";
      link.style.color = "white";
      link.style.textDecoration = "none";
      link.addEventListener('click', function (e) {
        e.preventDefault();

        // Abrir o visualizador STL
        abrirVisualizadorSTL(args.stlFilePath);
      });

      hotSpotDiv.appendChild(link);
    }

    function abrirVisualizadorSTL(stlPath) {
      // Configurar um modal ou redirecionar para um visualizador STL
      const modal = document.createElement('div');
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.width = '100%';
      modal.style.height = '100%';
      modal.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
      modal.style.zIndex = '1000';
      modal.innerHTML = `<iframe src="stl-viewer.html?file=${encodeURIComponent(stlPath)}"style="width: 100%; height: 100%; border: none;"></iframe>
      <button style="position: absolute; top: 10px; right: 10px; z-index: 1001;">Fechar</button>`;

      document.body.appendChild(modal);

      // Fechar o modal
      modal.querySelector('button').addEventListener('click', () => {
        document.body.removeChild(modal);
      });
    }
    
    // Função que cria a popup dentro da imagem 360
    function criarPopup(hotSpotDiv, args) {
      hotSpotDiv.classList.add('custom-tooltip');

      var popup = document.createElement('div');
      popup.className = 'popup';
      popup.innerHTML = '<p>' + args.content + '</p><button class="fechar-btn">Fechar</button>';
      hotSpotDiv.appendChild(popup);

      // Torna a popup visível quando o usuário clica no hotspot
      hotSpotDiv.addEventListener('click', function () {
        var allPopups = document.querySelectorAll('.popup');
        allPopups.forEach(function (p) { p.style.display = 'none'; }); // Fecha todas as popups abertas
        popup.style.display = 'block'; // Abre a popup do hotspot clicado
      });

      // Função para fechar a popup quando o botão for clicado
      popup.querySelector('.fechar-btn').addEventListener('click', function (event) {
        event.stopPropagation(); // Evita o clique de fechar abrir novamente a popup
        popup.style.display = 'none'; // Esconde a popup
      });
    }
  </script>  

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three/examples/js/loaders/STLLoader.js"></script>

</body>

</html>